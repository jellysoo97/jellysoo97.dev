---
title: 렌더링 방식, CSR과 SSR
description: CSR, SSR 렌더링 방식 정리
date: 2024-02-08 22:12:31
tag: web
---

![thumbnail](/images/posts/web/rendering-method/1.png)

CSR, SSR은 대표적인 렌더링 방식이다.

**초기 HTML 렌더링**을 클라이언트(브라우저)에서 하면 CSR, 서버(Node.js)에서 하면 SSR 방식이다.

렌더링을 어디서 하느냐에 따라 장단점이 있는데 관련 개념들과 함께 정리해보고자 한다.

## 클라이언트 사이드 렌더링, CSR

<img src="/images/posts/web/rendering-method/2.png" alt="CSR" />

CSR은 **최소한의 HTML을 가지고 클라이언트에서 자바스크립트로 동적 렌더링**을 하는 것을 말한다.

원재료를 사서 직접 요리하는 것과 같다.

<br />

(초기 렌더링)

1. 서버) 비었거나 최소한의 구조만 갖춘 HTML을 렌더링해서 응답으로 보낸다.
2. 클라이언트) 자바스크립트를 다운받고 실행한다.

   자바스크립트 번들에는 리액트, 서드파티 라이브러리 등 앱을 실행하는 데 필요한 모든 것이 포함되어 있다. 그만큼 무거워서 다운로드할 때 시간이 걸린다.

   리액트가 실행되면 동적으로 DOM이 생성된다. (viewable)

   이 때 이벤트 리스너도 DOM에 부착된다. (interactive, hydration)

3. 클라이언트) 페이지를 그리는 과정에서 데이터가 필요하면 서버에 요청을 보내 콘텐츠를 렌더링한다.

<br />

(초기 렌더링 이후 라우팅)

초기 렌더링 시에 서버에서 받은 HTML 내의 컴포넌트만 바꾸면서 새로운 페이지를 렌더링한다.

서버에 새로운 페이지를 요청하지 않고 단일 페이지로 동작한다는 의미에서 **SPA**라고 한다.

풀 페이지 로드가 되지 않아 새로고침이 발생하지 않고 깜빡임 이슈도 없다.

## 서버 사이드 렌더링, SSR

<img src="/images/posts/web/rendering-method/3.png" alt="SSR" />

SSR은 **서버에서 초기 렌더링을 한 후 준비된 HTML을 클라이언트에 보내는 것**을 말한다.

CSR과 달리 자바스크립트가 로드되고 실행되기 전에 유저가 페이지 콘텐츠를 볼 수 있다.

준비된 밀키트를 사서 요리하는 것과 같다.

<br />

(초기 렌더링)

1. 서버) 즉시 렌더링 가능한 HTML 파일을 응답으로 보낸다.

   데이터 패칭이 필요한 경우 서버에서 api call을 하고 콘텐츠가 담긴 HTML을 렌더링한다.

2. 클라이언트) 받은 HTML을 렌더링한다. (viewable)

   자바스크립트가 로드되기 전이기 때문에 인터랙션은 안된다. 동작하지 않을 뿐 인터랙션은 다 기록되고 있다.

3. 클라이언트) 자바스크립트를 다운받는다.
4. 클라이언트) hydration이 일어난다. (interactive)

   이 때 기억하고 있던 이벤트를 발생시킨다.

<br />

(초기 렌더링 이후)

MPA이면 라우팅이 발생할 때마다 서버에 새로운 페이지에 대한 HTML을 요청한다.

새로운 HTML을 내려받으면 전체 페이지가 다시 로드되기 때문에 새로고침이 발생하고 깜빡임 이슈가 있을 수 있다.

<br />

❗️그렇다고 **SPA → CSR, MPA → SSR은 아니다.**

예를 들어 Next.js는 서버에서 페이지가 처음 렌더링되지만(SSR) 이후 라우팅은 모두 클라이언트에서 처리한다.(like classic SPA)

`next-link` 컴포넌트는 클라이언트 컴포넌트로, 페이지 이동 시마다 HTML, CSS, JS 등 새로운 리소스를 로드하지 않고 필요한 부분만 DOM 업데이트한다.

## CSR과 SSR 비교

![CSR and SSR](/images/posts/web/rendering-method/4.png)

### 첫 페이지 로딩 속도

- CSR👎 SSR👍

  CSR: 유저는 자바스크립트가 로딩될 동안 빈 화면 또는 로더를 본다. 사용자 경험이 좋지 않다. 게다가 자바스크립트 번들이 무겁거나 네트워크가 좋지 않은 유저라면 더더욱 좋지 않다.

  SSR: non-interactive하긴 하지만 유저는 자바스크립트가 로딩될 동안 콘텐츠가 있는 화면을 보고 있을 수 있어 사용자 경험이 좋다.

### SEO

- CSR👎 SSR👍

  CSR: 기본적으로 자바스크립트가 실행되어야 콘텐츠가 렌더링되기 때문에 검색 엔진 크롤러가 콘텐츠를 제대로 읽어들이지 못할 수 있다.

  SSR: 초기 렌더링 때부터 필요한 데이터가 들어있으므로 크롤러가 색인(정보를 모아 인덱싱)하는 데 유리하다.

### 서버 부담

- CSR👍 SSR👎

  CSR: 클라이언트에서 연산, 라우팅 등을 처리하기 때문에 서버 부하가 적다.

  SSR: 서버에서 처리하는 부분이 많아서 서버 자원을 더 많이 사용한다.
